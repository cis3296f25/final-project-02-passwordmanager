graph TB
    subgraph "Entry Point"
        MAIN[main.py<br/>Start server & GUI]
    end

    subgraph "GUI Layer"
        LOGIN[LoginDialog]
        MAINWIN[MainWindow]
        DIALOGS[Add/Edit Dialogs]
        LIST[ListCredentialsWidget]
        SETTINGS[SettingsDialog]
    end

    subgraph "API Layer"
        API[Flask REST API]
        ROUTES[routes.py]
        CALLER[apiCallerMethods]
    end

    subgraph "Core"
        PM[passwordManager<br/>Vault ops]
        CRYPTO[Encryption<br/>KDF, VMK]
        VALIDATE[Password Strength]
        EXPORT[Export/Import<br/>Services]
    end

    subgraph "Storage"
        DB[(vault.db)]
        CONFIG[config.json]
    end

    subgraph "Resources"
        RES[Colors, Strings, Images]
        THEME[Theme Manager]
    end

    MAIN --> API
    MAIN --> LOGIN
    LOGIN --> MAINWIN
    MAINWIN --> DIALOGS
    MAINWIN --> LIST
    MAINWIN --> SETTINGS

    DIALOGS --> CALLER
    LIST --> CALLER
    CALLER --> API
    API --> ROUTES
    ROUTES --> PM
    ROUTES --> VALIDATE
    ROUTES --> EXPORT
    PM --> CRYPTO
    PM --> DB
    EXPORT --> PM

    SETTINGS --> CONFIG
    MAINWIN --> RES
    MAINWIN --> THEME
    THEME --> CONFIG

    classDef entry fill:#8ACE00,stroke:#6DA400,color:#000
    classDef gui fill:#5a9fff,stroke:#4a5f8f,color:#fff
    classDef api fill:#ff6b6b,stroke:#ee5a5a,color:#fff
    classDef core fill:#9f5aff,stroke:#8a4fdf,color:#fff
    classDef storage fill:#1e1e2f,stroke:#31314d,color:#fff
    classDef res fill:#F4F3F2,stroke:#e0e0e0,color:#000

    class MAIN entry
    class LOGIN,MAINWIN,DIALOGS,LIST,SETTINGS gui
    class API,ROUTES,CALLER api
    class PM,CRYPTO,VALIDATE,EXPORT core
    class DB,CONFIG storage
    class RES,THEME res

---

This diagram shows how the password manager is built. The GUI (blue boxes) is what users see - login screen, main window, dialogs for adding/editing passwords. When you do something in the GUI, it sends HTTP requests through the API layer (red boxes) to the core logic (purple boxes), which handles encryption and saves everything to the database. Even though it's a desktop app, we use a REST API internally so the GUI doesn't have to know about encryption or databases - it just makes requests and gets responses back. The whole thing starts from main.py which fires up both the web server and the GUI.
